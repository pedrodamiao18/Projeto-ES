<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registo de Incidente</title>
  <link rel="stylesheet" href="https://unpkg.com/lucide@latest">
  <link rel="stylesheet" href="/global.css">
  <link rel="stylesheet" href="registoIncidente.css">
  <script src="/toast.js" defer></script>
</head>

<body>

<aside class="sidebar"></aside>

  <div class="main-content">
    <div class="form-container">
      <div class="header">
        <h1>Registo de Incidente</h1>
      </div>

      <div class="form-box">
        <div>
          <label>Nome</label>
          <input id="nome" type="text" placeholder="Insira o nome">
        </div>

        <div>
          <label>Data</label>
          <input id="data" type="date">
        </div>
        <div>
          <label>Categoria</label>
          <select name="categoria" id="categoria" required>
            <option value="">-- Selecione --</option>
            <option value="Sistema e Aplicações">Sistema e Aplicações</option>
            <option value="Rede e Conectividade">Rede e Conectividade</option>
            <option value="Hardware e Equipamentos">Hardware e Equipamentos</option>
            <option value="Comunicação">Comunicação</option>
            <option value="Segurança">Segurança</option>
            <option value="Outro">Outro</option>
          </select>

          </select>
        </div>

        <div>
          <label>Tipo de incidente</label>
          <select id="tipo">
            <option value="">-- Selecione a categoria primeiro --</option>
          </select>
        </div>

        <div>
          <label>Descrição</label>
          <textarea id="descricao" placeholder="Descreva o incidente..."></textarea>
        </div>

        <button class="submit-btn" id="btnSubmeter">Submeter</button>
      </div>
      <script src="registoIncidente.js"></script>
    </div>
  </div>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    lucide.createIcons();
  </script>

  <script>
    const tiposPorCategoria = {
      "Sistema e Aplicações": [
        "Erro no sistema",
        "Aplicação não abre",
        "Aplicação bloqueia / crash",
        "Lentidão do sistema",
        "Funcionalidade não disponível",
        "Erro após atualização",
        "Outro"
      ],
      "Rede e Conectividade": [
        "Sem acesso à internet",
        "Ligação instável",
        "VPN não funciona",
        "Wi-Fi indisponível",
        "Rede lenta",
        "Outro"

      ],
      "Hardware e Equipamentos": [
        "Computador não liga",
        "Ecrã com problemas",
        "Teclado / rato não funcionam",
        "Impressora não imprime",
        "Equipamento danificado",
        "Outro"
      ],
      "Comunicação": [
        "Email não funciona",
        "Não recebe emails",
        "Outlook / Gmail não abre",
        "Problemas com Teams / Zoom",
        "Outro"
      ],
      "Segurança": [
        "Suspeita de phishing",
        "Vírus / malware",
        "Acesso não autorizado",
        "Email suspeito",
        "Outro"
      ],
      "Outro": [
        "Pedido de instalação de software",
        "Pedido de atualização",
        "Pedido de novo equipamento",
        "Outro"
      ]
    };

    const categoriaSelect = document.getElementById("categoria");
    const tipoSelect = document.getElementById("tipo");

    categoriaSelect.addEventListener("change", () => {
      const categoria = categoriaSelect.value;
      tipoSelect.innerHTML = '<option value="">-- Selecione --</option>';

      if (tiposPorCategoria[categoria]) {
        tiposPorCategoria[categoria].forEach(tipo => {
          const option = document.createElement("option");
          option.value = tipo;
          option.textContent = tipo;
          tipoSelect.appendChild(option);
        });
      }
    });
  </script>
  <script src="/sidebar.js"></script>
</body>

</html>
